<!DOCTYPE html>
<html lang="zh-tw">
<script src='//code.jquery.com/jquery-2.1.4.min.js'></script>
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId: '1119662058149706',
            xfbml: true,
            version: 'v2.8'
        });
        
        FB.getLoginStatus(function(response) {
            statusChangeCallback(response);
         });

    };
    
    /* 
        Facebook Login
    */
    function statusChangeCallback(response) {
        console.log('statusChangeCallback');
        console.log(response);
        if (response.status === 'connected') {
          testAPI();
        } else if (response.status === 'not_authorized') {
          document.getElementById('status').innerHTML = 'Please log ' + 'into this app.';
        } else {
          document.getElementById('status').innerHTML = 'Please log ' +'into Facebook.';
        }
    }
    
    function checkLoginState() {
        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
        });
    }
    
    

    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/zh_TW/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML = 'Thanks for logging in, ' + response.name + '!';
    });
    }
    
    function fbSend() {
        FB.ui({
            method: 'send',
            to: '1757880887',
            link: 'http://hearsilent.tech/game1123/?vote=' + vote,
            redirect_uri: 'https://gist.github.com/hearsilent/fd4b18824c7100a0e6615e3e3a45d21e',
            caption: vote
        }, function(response) {
            console.log(response);
        });
    }

    var vote = getParameterByName('vote');

    function getParameterByName(name, url) {
        if (!url) {
            url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) {
            if (url != "http://hearsilent.tech/game1123/") {
                window.location.href = "http://hearsilent.tech/game1123/";
            }
            return null;
        }
        if (!results[2]) {
            window.location.href = "http://hearsilent.tech/game1123/";
            return null;
        }
        var fixResult = results[2].replace(/\+/g, " ");
        if (0 > fixResult || fixResult > 3) {
            window.location.href = "http://hearsilent.tech/game1123/";
            return null;
        }
        return decodeURIComponent(fixResult);
    }

    $(window).load(function() {
        if (vote != null) {
            $(".event-title").css('display', 'none');
            $(".vote").css('display', 'none');
            $(".result").css('display', 'block');
            $(".event-content").css('font-size','20px');
            if (vote == 1) {
                $(".event-content").html("感謝您來吃飯！");
            } else if (vote == 2) {
                $(".event-content").html("只喝酒這樣對嗎？酒鬼！");
            } else if (vote == 3) {
                $(".event-content").html("原來您這麼閒阿 (誤) 感謝您的全程參與！");
            } else if (vote == 0) {
                $(".event-content").html("邊緣人 4ni，幫你 QQ");
            }
        } else {
            $(".event-title").css('display', 'block');
            $(".vote").css('display', 'block');
            $(".result").css('display', 'none');
        }
    });
    /*
    window.onload = function() {
        
        if (vote != null) {
            document.getElementById("event-title").setAttribute('style', 'visibility:hidden');
            document.getElementById("vote").setAttribute('style', 'visibility:hidden');
            document.getElementById("result").setAttribute('style', 'visibility:visible');
            if (vote == 1) {
                document.getElementById("event-content").innerHTML = "感謝您來吃飯！";
            } else if (vote == 2) {
                document.getElementById("event-content").innerHTML = "只喝酒這樣對嗎？酒鬼！";
            } else if (vote == 3) {
                document.getElementById("event-content").innerHTML = "原來您這麼閒阿 (誤) 感謝您的全程參與！";
            } else if (vote == 0) {
                document.getElementById("event-content").innerHTML = "邊緣人 4ni，幫你 QQ";
            }
        } else {
            document.getElementById("event-title").setAttribute('style', 'visibility:visible');
            document.getElementById("vote").setAttribute('style', 'visibility:visible');
            document.getElementById("result").setAttribute('style', 'visibility:hidden');
        }
    }
    */
</script>

<head>
    <meta charset="UTF-8">
    <title>Game1123 by hearsilent</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>

<body>
    <section class="page-header">
        <h1 class="project-name">Game 1123</h1>
        <h2 class="project-tagline">I want to play a game.</h2>
        <a href="https://github.com/hearsilent/game1123" class="btn">View on GitHub</a>
        <a href="https://github.com/hearsilent/game1123/zipball/master" class="btn">Download .zip</a>
        <a href="https://github.com/hearsilent/game1123/tarball/master" class="btn">Download .tar.gz</a>
    </section>
    <section class="main-content">
        <h3 class="event-title">11/23 吃飯 && 微醺團之與聽風有約－Bonus 小遊戲</h3>
        <h4 class="event-content">
            <p>安安，各位親朋好友兄弟姊妹，打給安安打給賀。</p>

            <p style="line-height:30px">由小弟我來跟各位報告一下：<br/>
                <strong>11/23 ( 三 ) 5:10 P.M.</strong> 跟聽風大大吃<strong>不老壽司</strong>，<br/> 價位大概在 200 ~ 1000 不等 ( 看你吃多少 )，<br/> 覺得太貴的中午可以晚點吃或吃多一點，預計用餐四十分鐘 ( 預留四十分鐘到燕巢 )<br/> 地址：80794 <strong>高雄市三民區明仁路 16 號</strong></p>

            <p style="line-height:30px"> 再來是 18 禁 ( 在場應該都有滿十八 ) 深夜團請自己斟酌，<br/> 演講結束後會回到 市區 大概是 11/23 ( 三 ) 10:00 ~ 10:30 P.M. 左右，<br/> 此團為微醺團，微醺團顧名思義就是淺酌一下小酒、聊聊演講不能說的八卦等 ...<br/> 但微醺團是以我跟聽風大大的酒量為基準，所以請自行斟酌要不要參加，
                <br/> 當然你也可以在酒吧喝果汁，只是可能會被嗆 xDDD<br/> 此團去跟回都是搭 Uber || Taxi，<br/> 不論你酒量多好可以空幹幾瓶高粱，
                <br/> 除了你走路以外，不准自行騎車或開車。
                <br/> 低消
                <strong>300</strong>元整<br/> 酒吧：’etage 15 Lounge bar (<a href="http://www.kh.inmap.tw/archives/9915">http://www.kh.inmap.tw/archives/9915</a>)</p>
        </h4>
        <h3 class="result">
            <p>按下按鈕後會寄送投票結果給我跟子竣的 Facebook Messenger，若還沒加好友的可以趁這個時候加 (？)，也可以在訊息留下你想讓我們知道的悄悄話
                <3 </p>
                <!-- FB login started-->
                <div class="fb-login-button" data-max-rows="1" data-size="large" data-show-faces="false" data-auto-logout-link="false"></div>
                
                <fb:login-button scope="public_profile,email" onlogin="checkLoginState();"></fb:login-button>

                <div id="status">
                </div>
    
            <!-- FB login ended -->        
            <a href="javascript:fbSend()" class="btn-vote">Send vote to messengers.</a>
        </h3>
        <section class="vote">
            <a href="http://hearsilent.tech/game1123/?vote=1" class="btn-vote">吃飯 && !微醺</a>
            <a href="http://hearsilent.tech/game1123/?vote=2" class="btn-vote">!吃飯 && 微醺</a>
            <a href="http://hearsilent.tech/game1123/?vote=3" class="btn-vote">吃飯 && 微醺</a>
            <a href="http://hearsilent.tech/game1123/?vote=0" class="btn-vote">以上皆非，邊緣人幫 QQ 選項</a>
        </section>
        <footer class="site-footer">
            <span class="site-footer-owner"><a href="https://github.com/hearsilent/game1123">Game1123</a> is maintained by <a href="https://github.com/hearsilent">hearsilent</a>.</span>
            <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
        </footer>
    </section>
</body>
</html>
